<!--profile.wxml-->
<view class="page">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="card user-card">
    <view class="user-header">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
      <view class="user-info">
        <text class="username">{{userInfo.nickName || 'ç”¨æˆ·'}}</text>
        <text class="user-id">ID: {{userId}}</text>
      </view>
      <button class="edit-btn" size="mini" bindtap="editProfile">ç¼–è¾‘</button>
    </view>
  </view>

  <!-- å¥åº·ç»Ÿè®¡ -->
  <view class="card stats-card">
    <text class="section-title">å¥åº·ç»Ÿè®¡</text>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{healthStats.recordCount}}</text>
        <text class="stat-label">è®°å½•æ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.assessmentCount}}</text>
        <text class="stat-label">è¯„ä¼°æ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.consultCount}}</text>
        <text class="stat-label">å’¨è¯¢æ¬¡æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.daysUsed}}</text>
        <text class="stat-label">ä½¿ç”¨å¤©æ•°</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="card menu-card">
    <text class="section-title">åŠŸèƒ½èœå•</text>
    <view class="menu-list">
      <view class="menu-item" bindtap="goToHealthHistory">
        <view class="menu-icon">ğŸ“Š</view>
        <text class="menu-text">å¥åº·å†å²</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="goToReminders">
        <view class="menu-icon">â°</view>
        <text class="menu-text">å¥åº·æé†’</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-icon">âš™ï¸</view>
        <text class="menu-text">è®¾ç½®</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="showAbout">
        <view class="menu-icon">â„¹ï¸</view>
        <text class="menu-text">å…³äºæˆ‘ä»¬</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- æ¨¡å¼åˆ‡æ¢ -->
  <view class="card mode-card">
    <view class="mode-switch">
      <text class="mode-label">APIæ¨¡å¼</text>
      <switch checked="{{isApiMode}}" bindchange="onModeChange" color="#4CAF50" />
    </view>
    <text class="mode-desc">{{isApiMode ? 'å½“å‰ä½¿ç”¨çœŸå®APIæ•°æ®' : 'å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®'}}</text>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="btn-secondary logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>
</view>
