<!--profile.wxml-->
<view class="page">
  <!-- 用户信息 -->
  <view class="card user-card">
    <view class="user-header">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
      <view class="user-info">
        <text class="username">{{userInfo.nickName || '用户'}}</text>
        <text class="user-id">ID: {{userId}}</text>
      </view>
      <button class="edit-btn" size="mini" bindtap="editProfile">编辑</button>
    </view>
  </view>

  <!-- 健康统计 -->
  <view class="card stats-card">
    <text class="section-title">健康统计</text>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{healthStats.recordCount}}</text>
        <text class="stat-label">记录次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.assessmentCount}}</text>
        <text class="stat-label">评估次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.consultCount}}</text>
        <text class="stat-label">咨询次数</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{healthStats.daysUsed}}</text>
        <text class="stat-label">使用天数</text>
      </view>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="card menu-card">
    <text class="section-title">功能菜单</text>
    <view class="menu-list">
      <view class="menu-item" bindtap="goToHealthHistory">
        <view class="menu-icon">📊</view>
        <text class="menu-text">健康历史</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="goToReminders">
        <view class="menu-icon">⏰</view>
        <text class="menu-text">健康提醒</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-icon">⚙️</view>
        <text class="menu-text">设置</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="showAbout">
        <view class="menu-icon">ℹ️</view>
        <text class="menu-text">关于我们</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- 模式切换 -->
  <view class="card mode-card">
    <view class="mode-switch">
      <text class="mode-label">API模式</text>
      <switch checked="{{isApiMode}}" bindchange="onModeChange" color="#4CAF50" />
    </view>
    <text class="mode-desc">{{isApiMode ? '当前使用真实API数据' : '当前使用模拟数据'}}</text>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <button class="btn-secondary logout-btn" bindtap="logout">退出登录</button>
  </view>
</view>
